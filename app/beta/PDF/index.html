<!DOCTYPE html>
<html>

<head>
    <title>Upload Images with Cloudflare R2</title>
</head>

<body>
    <form method="POST" enctype="multipart/form-data">
        <label for="filePicker">Select file to upload:</label>
        <input type="file" name="filePicker" id="filePicker" /><br /><br />
        <input type="submit" value="Upload" />
    </form>

    <script>
        async function uploadFile(file) {
            fetch('https://pdf.api.cla-q.net', {
                method: 'POST',
                headers: {
                    'Access-Control-Allow-Origin': '*',
                    'Content-Type': file.type
                },
                body: file
            })
                .then((response) => response.text())
                .then((data) => {
                    console.log(data)
                    location.href = "success.html";
                })
                .catch((error) => console.error(error));
        }

        const filePicker = document.getElementById('filePicker');
        const onSelectFile = () => uploadFile(filePicker.files[0]);
        filePicker.addEventListener('change', onSelectFile, false);
    </script>
</body>

</html>